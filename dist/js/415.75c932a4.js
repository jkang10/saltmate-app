"use strict";(self["webpackChunksaltmate_app"]=self["webpackChunksaltmate_app"]||[]).push([[415],{4415:function(e,t,l){l.r(t),l.d(t,{default:function(){return q}});l(8111),l(1701),l(8237);var n=l(6768),a=l(4232),u=l(5130),i=l(144),s=l(5328),r=l(2832);const c={class:"management-container"},d={class:"equity-list card"},o={key:0,class:"loading-spinner"},k={key:1,class:"equity-table"},y=["onUpdate:modelValue"],p=["onClick"],v={key:2,class:"no-data"};var m={__name:"EquityManagement",setup(e){const t=(0,i.KR)([]),l=(0,i.KR)(!0),m=(0,n.EW)(()=>t.value.reduce((e,t)=>e+(t.equityPercentage||0),0).toFixed(2)),L=async()=>{l.value=!0;try{const e=await(0,r.GG)((0,r.rJ)(s.db,"equity"));t.value=e.docs.map(e=>({...e.data(),newEquity:null}))}catch(e){console.error("지분 정보를 불러오는 중 오류 발생:",e)}finally{l.value=!1}},h=async e=>{if(null===e.newEquity||e.newEquity<0)return void alert("유효한 지분율을 입력해주세요.");if(!confirm(`'${e.userName}'님의 지분율을 ${e.newEquity}%로 변경하시겠습니까?`))return;const t=(0,r.H9)(s.db,"equity",e.userId);try{await(0,r.mZ)(t,{equityPercentage:e.newEquity}),alert("지분율이 성공적으로 업데이트되었습니다."),await L()}catch(l){console.error("지분율 업데이트 중 오류 발생:",l)}};return(0,n.sV)(L),(e,i)=>((0,n.uX)(),(0,n.CE)("div",c,[i[1]||(i[1]=(0,n.Lk)("h3",null,[(0,n.Lk)("i",{class:"fas fa-chart-pie"}),(0,n.eW)(" 지분 관리")],-1)),i[2]||(i[2]=(0,n.Lk)("p",null,"NFT 보유자들의 공장 지분율을 관리합니다.",-1)),(0,n.Lk)("div",d,[(0,n.Lk)("h4",null,"전체 지분 현황 (총 "+(0,a.v_)(m.value)+"%)",1),l.value?((0,n.uX)(),(0,n.CE)("div",o)):t.value.length>0?((0,n.uX)(),(0,n.CE)("table",k,[i[0]||(i[0]=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"보유자 이름"),(0,n.Lk)("th",null,"이메일"),(0,n.Lk)("th",null,"현재 지분율 (%)"),(0,n.Lk)("th",null,"새 지분율 입력"),(0,n.Lk)("th",null,"관리")])],-1)),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.value,e=>((0,n.uX)(),(0,n.CE)("tr",{key:e.userId},[(0,n.Lk)("td",null,(0,a.v_)(e.userName),1),(0,n.Lk)("td",null,(0,a.v_)(e.userEmail),1),(0,n.Lk)("td",null,(0,a.v_)(e.equityPercentage)+" %",1),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{type:"number","onUpdate:modelValue":t=>e.newEquity=t,min:"0",max:"100",step:"0.01",placeholder:"새 지분율",class:"equity-input"},null,8,y),[[u.Jo,e.newEquity,void 0,{number:!0}]])]),(0,n.Lk)("td",null,[(0,n.Lk)("button",{onClick:t=>h(e),class:"btn btn-sm btn-primary"}," 지분율 저장 ",8,p)])]))),128))])])):((0,n.uX)(),(0,n.CE)("div",v,"지분 정보를 가진 사용자가 없습니다."))])]))}},L=l(1241);const h=(0,L.A)(m,[["__scopeId","data-v-764661f3"]]);var q=h}}]);
//# sourceMappingURL=415.75c932a4.js.map