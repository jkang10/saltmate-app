"use strict";(self["webpackChunksaltmate_app"]=self["webpackChunksaltmate_app"]||[]).push([[462],{8462:function(t,a,e){e.r(a),e.d(a,{default:function(){return g}});e(8111),e(1701);var l=e(6768),n=e(4232),o=e(5130),u=e(144),r=e(5328),s=e(2832);const c={class:"management-container"},d={class:"order-list card"},i={key:0,class:"loading-spinner"},p={key:1,class:"order-table"},v=["onUpdate:modelValue","onChange"],k={key:2,class:"no-data"};var m={__name:"OrderDeliveryManagement",setup(t){const a=(0,u.KR)([]),e=(0,u.KR)(!0),m=t=>t?t.toDate().toLocaleString("ko-KR"):"",L=t=>new Intl.NumberFormat("ko-KR").format(t)+"원",h=t=>{if(!t||0===t.length)return"상품 정보 없음";const a=t[0].productName||"상품",e=t.length-1;return e>0?`${a} 외 ${e}건`:a},g=t=>{const a={paymentCompleted:"결제 완료",preparing:"배송 준비중",shipping:"배송중",delivered:"배송 완료",cancelled:"주문 취소"};return a[t]||t},b=async()=>{e.value=!0;try{const t=(0,s.rJ)(r.db,"orders"),e=(0,s.P)(t,(0,s.My)("createdAt","desc")),l=await(0,s.GG)(e);a.value=l.docs.map(t=>({id:t.id,...t.data()}))}catch(t){console.error("주문 목록을 불러오는 중 오류 발생:",t),alert("주문 목록을 불러오는 데 실패했습니다.")}finally{e.value=!1}},y=async(t,a)=>{const e=g(a);if(confirm(`'${t.userName}'님의 주문 상태를 '${e}'(으)로 변경하시겠습니까?`))try{const e=(0,s.H9)(r.db,"orders",t.id);await(0,s.mZ)(e,{status:a}),alert("주문 상태가 성공적으로 변경되었습니다."),t.status=a}catch(l){console.error("주문 상태 변경 중 오류 발생: ",l),alert("주문 상태 변경에 실패했습니다."),event.target.value=t.status}else event.target.value=t.status};return(0,l.sV)(b),(t,u)=>((0,l.uX)(),(0,l.CE)("div",c,[u[3]||(u[3]=(0,l.Lk)("h3",null,[(0,l.Lk)("i",{class:"fas fa-truck-loading"}),(0,l.eW)(" 주문 배송 관리")],-1)),u[4]||(u[4]=(0,l.Lk)("p",null,"고객 주문을 확인하고 배송 상태를 업데이트합니다.",-1)),(0,l.Lk)("div",d,[u[2]||(u[2]=(0,l.Lk)("h4",null,"전체 주문 목록",-1)),e.value?((0,l.uX)(),(0,l.CE)("div",i)):a.value.length>0?((0,l.uX)(),(0,l.CE)("table",p,[u[1]||(u[1]=(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,"주문일"),(0,l.Lk)("th",null,"주문번호"),(0,l.Lk)("th",null,"주문자"),(0,l.Lk)("th",null,"주문 상품"),(0,l.Lk)("th",null,"총 결제금액"),(0,l.Lk)("th",null,"배송 상태")])],-1)),(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.value,t=>((0,l.uX)(),(0,l.CE)("tr",{key:t.id},[(0,l.Lk)("td",null,(0,n.v_)(m(t.createdAt)),1),(0,l.Lk)("td",null,(0,n.v_)(t.orderId),1),(0,l.Lk)("td",null,(0,n.v_)(t.userName),1),(0,l.Lk)("td",null,(0,n.v_)(h(t.items)),1),(0,l.Lk)("td",null,(0,n.v_)(L(t.totalAmount)),1),(0,l.Lk)("td",null,[(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":a=>t.status=a,onChange:a=>y(t,a.target.value),class:"status-select"},u[0]||(u[0]=[(0,l.Fv)('<option value="paymentCompleted" data-v-1c2baac8>결제 완료</option><option value="preparing" data-v-1c2baac8>배송 준비중</option><option value="shipping" data-v-1c2baac8>배송중</option><option value="delivered" data-v-1c2baac8>배송 완료</option><option value="cancelled" data-v-1c2baac8>주문 취소</option>',5)]),40,v),[[o.u1,t.status]])])]))),128))])])):((0,l.uX)(),(0,l.CE)("div",k,"주문 내역이 없습니다."))])]))}},L=e(1241);const h=(0,L.A)(m,[["__scopeId","data-v-1c2baac8"]]);var g=h}}]);
//# sourceMappingURL=462.90203623.js.map