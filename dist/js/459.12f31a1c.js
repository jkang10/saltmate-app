"use strict";(self["webpackChunksaltmate_app"]=self["webpackChunksaltmate_app"]||[]).push([[459],{1459:function(t,n,a){a.r(n),a.d(n,{default:function(){return _}});var e=a(6768),o=a(4232),l=a(5130),u=a(144),r=a(5328),s=a(2832);const c={class:"management-container"},i={class:"token-summary card"},p={key:0,class:"loading-spinner"},d={key:1,class:"summary-grid"},k={class:"token-card cobs"},m={class:"token-card bnd"},b={class:"token-actions card"},L={class:"form-group-inline"},v={class:"form-group"},y={class:"form-group"},f={class:"form-group"},g={class:"form-group"};var S={__name:"TokenManagement",setup(t){const n=(0,u.KR)(!0),a=(0,u.Kh)({cobs:{totalSupply:0,totalBurned:0,circulatingSupply:0},bnd:{totalSupply:0,totalBurned:0,circulatingSupply:0}}),S=(0,u.Kh)({token:"cobs",type:"mint",amount:0,reason:""}),h=t=>new Intl.NumberFormat("ko-KR").format(t||0),B=async()=>{n.value=!0;try{const t=(0,s.H9)(r.db,"tokenStats","summary"),n=await(0,s.x7)(t);if(n.exists()){const t=n.data();Object.assign(a.cobs,t.cobs),Object.assign(a.bnd,t.bnd)}else console.log("토큰 요약 문서가 존재하지 않아 초기화합니다.")}catch(t){console.error("토큰 데이터를 불러오는 중 오류 발생:",t)}finally{n.value=!1}},_=async()=>{if(S.amount<=0||!S.reason.trim())return void alert("유효한 수량과 사유를 입력해주세요.");const t=S.token.toUpperCase(),n="mint"===S.type?"발행":"소각";if(!confirm(`${t} 토큰 ${S.amount}개를 ${n}하시겠습니까?`))return;const e=(0,s.wP)(r.db),o=(0,s.H9)(r.db,"tokenStats","summary"),l=(0,s.H9)((0,s.rJ)(r.db,"tokenTransactions"));let u={};if("mint"===S.type)u[`${S.token}.totalSupply`]=(0,s.GV)(S.amount),u[`${S.token}.circulatingSupply`]=(0,s.GV)(S.amount);else{if(a[S.token].circulatingSupply<S.amount)return void alert("소각하려는 수량이 현재 유통량보다 많습니다.");u[`${S.token}.totalBurned`]=(0,s.GV)(S.amount),u[`${S.token}.circulatingSupply`]=(0,s.GV)(-S.amount)}e.update(o,u),e.set(l,{token:S.token,type:S.type,amount:S.amount,reason:S.reason,createdAt:(0,s.O5)(),adminId:r.j2.currentUser.uid});try{await e.commit(),alert("작업이 성공적으로 완료되었습니다."),S.amount=0,S.reason="",await B()}catch(c){console.error("토큰 작업 중 오류 발생:",c),alert("작업에 실패했습니다.")}};return(0,e.sV)(B),(t,u)=>((0,e.uX)(),(0,e.CE)("div",c,[u[15]||(u[15]=(0,e.Lk)("h3",null,[(0,e.Lk)("i",{class:"fas fa-coins"}),(0,e.eW)(" 토큰 관리 (COBS, BND)")],-1)),u[16]||(u[16]=(0,e.Lk)("p",null,"토큰의 발행, 소각 및 유통 현황을 관리합니다.",-1)),(0,e.Lk)("div",i,[u[6]||(u[6]=(0,e.Lk)("h4",null,"토큰 현황",-1)),n.value?((0,e.uX)(),(0,e.CE)("div",p)):((0,e.uX)(),(0,e.CE)("div",d,[(0,e.Lk)("div",k,[u[4]||(u[4]=(0,e.Lk)("h5",null,"COBS (보상 토큰)",-1)),(0,e.Lk)("p",null,"총 발행량: "+(0,o.v_)(h(a.cobs.totalSupply)),1),(0,e.Lk)("p",null,"총 소각량: "+(0,o.v_)(h(a.cobs.totalBurned)),1),(0,e.Lk)("p",null," 현재 유통량: "+(0,o.v_)(h(a.cobs.circulatingSupply)),1)]),(0,e.Lk)("div",m,[u[5]||(u[5]=(0,e.Lk)("h5",null,"BND (증권형 토큰)",-1)),(0,e.Lk)("p",null,"총 발행량: "+(0,o.v_)(h(a.bnd.totalSupply)),1),(0,e.Lk)("p",null,"총 소각량: "+(0,o.v_)(h(a.bnd.totalBurned)),1),(0,e.Lk)("p",null," 현재 유통량: "+(0,o.v_)(h(a.bnd.circulatingSupply)),1)])]))]),(0,e.Lk)("div",b,[u[14]||(u[14]=(0,e.Lk)("h4",null,"토큰 발행 / 소각",-1)),(0,e.Lk)("form",{onSubmit:(0,l.D$)(_,["prevent"])},[(0,e.Lk)("div",L,[(0,e.Lk)("div",v,[u[8]||(u[8]=(0,e.Lk)("label",null,"토큰 선택",-1)),(0,e.bo)((0,e.Lk)("select",{"onUpdate:modelValue":u[0]||(u[0]=t=>S.token=t)},u[7]||(u[7]=[(0,e.Lk)("option",{value:"cobs"},"COBS",-1),(0,e.Lk)("option",{value:"bnd"},"BND",-1)]),512),[[l.u1,S.token]])]),(0,e.Lk)("div",y,[u[10]||(u[10]=(0,e.Lk)("label",null,"작업 선택",-1)),(0,e.bo)((0,e.Lk)("select",{"onUpdate:modelValue":u[1]||(u[1]=t=>S.type=t)},u[9]||(u[9]=[(0,e.Lk)("option",{value:"mint"},"발행 (Mint)",-1),(0,e.Lk)("option",{value:"burn"},"소각 (Burn)",-1)]),512),[[l.u1,S.type]])]),(0,e.Lk)("div",f,[u[11]||(u[11]=(0,e.Lk)("label",{for:"amount"},"수량",-1)),(0,e.bo)((0,e.Lk)("input",{type:"number",id:"amount","onUpdate:modelValue":u[2]||(u[2]=t=>S.amount=t),placeholder:"수량 입력",min:"0",required:""},null,512),[[l.Jo,S.amount,void 0,{number:!0}]])])]),(0,e.Lk)("div",g,[u[12]||(u[12]=(0,e.Lk)("label",{for:"reason"},"사유",-1)),(0,e.bo)((0,e.Lk)("input",{type:"text",id:"reason","onUpdate:modelValue":u[3]||(u[3]=t=>S.reason=t),placeholder:"발행 또는 소각 사유 (예: 이벤트 보상)",required:""},null,512),[[l.Jo,S.reason]])]),u[13]||(u[13]=(0,e.Lk)("button",{type:"submit",class:"btn btn-primary"},"작업 실행",-1))],32)]),u[17]||(u[17]=(0,e.Lk)("div",{class:"transaction-log card"},[(0,e.Lk)("h4",null,"트랜잭션 기록"),(0,e.Lk)("p",{class:"placeholder-text"},"이곳에 토큰 발행/소각 기록이 표시됩니다.")],-1))]))}},h=a(1241);const B=(0,h.A)(S,[["__scopeId","data-v-6ffc4054"]]);var _=B}}]);
//# sourceMappingURL=459.12f31a1c.js.map