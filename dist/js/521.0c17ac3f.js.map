{"version":3,"file":"js/521.0c17ac3f.js","mappings":"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","sources":["webpack://saltmate-app/./src/components/admin/UserManagement.vue","webpack://saltmate-app/./src/components/admin/UserManagement.vue?2c3d"],"sourcesContent":["<template>\n  <div class=\"user-management\">\n    <h3><i class=\"fas fa-users-cog\"></i> 회원 관리</h3>\n    <p>회원 목록을 조회하고 사용자 권한을 관리합니다.</p>\n\n    <div v-if=\"loading\" class=\"loading-spinner\"></div>\n\n    <table v-if=\"!loading && users.length > 0\" class=\"user-table\">\n      <thead>\n        <tr>\n          <th>이름</th>\n          <th>이메일</th>\n          <th>가입일</th>\n          <th>관리자 여부</th>\n          <th>관리</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"user in users\" :key=\"user.id\">\n          <td>{{ user.name }}</td>\n          <td>{{ user.email }}</td>\n          <td>{{ formatDate(user.createdAt) }}</td>\n          <td>\n            <span :class=\"user.isAdmin ? 'admin-badge' : 'user-badge'\">\n              {{ user.isAdmin ? \"Admin\" : \"User\" }}\n            </span>\n          </td>\n          <td>\n            <button @click=\"toggleAdmin(user)\" class=\"btn btn-sm btn-secondary\">\n              권한 변경\n            </button>\n            <button @click=\"deleteUser(user.id)\" class=\"btn btn-sm btn-danger\">\n              삭제\n            </button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n\n    <div v-if=\"!loading && users.length === 0\" class=\"no-data\">\n      표시할 사용자가 없습니다.\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted } from \"vue\";\nimport { db } from \"@/firebaseConfig\";\nimport {\n  collection,\n  getDocs,\n  doc,\n  updateDoc,\n  deleteDoc,\n} from \"firebase/firestore\";\n\nconst users = ref([]);\nconst loading = ref(true);\n\n// Firestore의 Timestamp 객체를 날짜 문자열로 변환하는 함수\nconst formatDate = (timestamp) => {\n  if (!timestamp || !timestamp.toDate) return \"날짜 정보 없음\";\n  return timestamp.toDate().toLocaleDateString(\"ko-KR\");\n};\n\n// Firestore에서 모든 사용자 정보를 가져오는 함수\nconst fetchUsers = async () => {\n  try {\n    const querySnapshot = await getDocs(collection(db, \"users\"));\n    users.value = querySnapshot.docs.map((doc) => ({\n      id: doc.id,\n      ...doc.data(),\n    }));\n  } catch (error) {\n    console.error(\"사용자 정보를 불러오는 중 오류 발생:\", error);\n    alert(\"사용자 정보를 불러오는 데 실패했습니다.\");\n  } finally {\n    loading.value = false;\n  }\n};\n\n// 사용자의 관리자 권한을 토글(변경)하는 함수\nconst toggleAdmin = async (user) => {\n  const confirmation = confirm(\n    `'${user.name}' 사용자의 권한을 '${\n      user.isAdmin ? \"일반 사용자\" : \"관리자\"\n    }' (으)로 변경하시겠습니까?`\n  );\n  if (!confirmation) return;\n\n  try {\n    const userRef = doc(db, \"users\", user.id);\n    await updateDoc(userRef, {\n      isAdmin: !user.isAdmin,\n    });\n    // 화면에 즉시 반영\n    user.isAdmin = !user.isAdmin;\n    alert(\"사용자 권한이 성공적으로 변경되었습니다.\");\n  } catch (error) {\n    console.error(\"권한 변경 중 오류 발생:\", error);\n    alert(\"권한 변경에 실패했습니다.\");\n  }\n};\n\n// Firestore에서 사용자를 삭제하는 함수\nconst deleteUser = async (userId) => {\n  const confirmation = confirm(\n    \"정말로 이 사용자를 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다.\"\n  );\n  if (!confirmation) return;\n\n  try {\n    await deleteDoc(doc(db, \"users\", userId));\n    // 화면에서 즉시 제거\n    users.value = users.value.filter((user) => user.id !== userId);\n    alert(\"사용자가 성공적으로 삭제되었습니다.\");\n  } catch (error) {\n    console.error(\"사용자 삭제 중 오류 발생:\", error);\n    alert(\"사용자 삭제에 실패했습니다.\");\n  }\n};\n\n// 컴포넌트가 마운트될 때 사용자 정보를 가져옴\nonMounted(() => {\n  fetchUsers();\n});\n</script>\n\n<style scoped>\n.user-management {\n  background-color: #fff;\n  padding: 30px;\n  border-radius: 12px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);\n}\n.user-management h3 {\n  margin-bottom: 20px;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n.user-table {\n  width: 100%;\n  border-collapse: collapse;\n  margin-top: 20px;\n}\n.user-table th,\n.user-table td {\n  border-bottom: 1px solid #eee;\n  padding: 12px 15px;\n  text-align: left;\n  vertical-align: middle;\n}\n.user-table th {\n  background-color: #f8f9fa;\n  font-weight: 600;\n  color: #555;\n}\n.admin-badge,\n.user-badge {\n  padding: 4px 8px;\n  border-radius: 5px;\n  font-size: 0.8em;\n  font-weight: bold;\n  color: #fff;\n}\n.admin-badge {\n  background-color: #dc3545; /* 빨간색 */\n}\n.user-badge {\n  background-color: #007bff; /* 파란색 */\n}\n.btn {\n  border: none;\n  border-radius: 5px;\n  padding: 6px 12px;\n  cursor: pointer;\n  margin-right: 5px;\n  transition: opacity 0.2s;\n}\n.btn:hover {\n  opacity: 0.8;\n}\n.btn-sm {\n  font-size: 0.85em;\n}\n.btn-secondary {\n  background-color: #6c757d;\n  color: white;\n}\n.btn-danger {\n  background-color: #dc3545;\n  color: white;\n}\n.loading-spinner {\n  border: 4px solid rgba(0, 0, 0, 0.1);\n  width: 36px;\n  height: 36px;\n  border-radius: 50%;\n  border-left-color: #007bff;\n  animation: spin 1s ease infinite;\n  margin: 50px auto;\n}\n@keyframes spin {\n  to {\n    transform: rotate(360deg);\n  }\n}\n.no-data {\n  text-align: center;\n  padding: 50px;\n  color: #777;\n}\n</style>\n","import script from \"./UserManagement.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./UserManagement.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./UserManagement.vue?vue&type=style&index=0&id=45c9f8b6&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-45c9f8b6\"]])\n\nexport default __exports__"],"names":["users","ref","loading","formatDate","timestamp","toDate","toLocaleDateString","fetchUsers","async","querySnapshot","getDocs","collection","db","value","docs","map","doc","id","data","error","console","alert","toggleAdmin","confirmation","confirm","user","name","isAdmin","userRef","updateDoc","deleteUser","deleteDoc","userId","filter","onMounted","_createElementBlock","_hoisted_1","_createElementVNode","class","_hoisted_2","length","_hoisted_3","_Fragment","_renderList","key","_toDisplayString","email","createdAt","_normalizeClass","onClick","$event","_hoisted_4","_hoisted_5","_hoisted_6","__exports__"],"sourceRoot":""}