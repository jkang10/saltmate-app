"use strict";(self["webpackChunksaltmate_app"]=self["webpackChunksaltmate_app"]||[]).push([[913],{7294:function(t,e,l){l.r(e),l.d(e,{default:function(){return C}});l(8111),l(1701);var a=l(6768),n=l(5130),o=l(4232),r=l(144),c=l(5328),s=l(2832);const u={class:"management-container"},i={class:"notice-form card"},d={class:"form-group"},k={class:"form-group"},p={class:"post-list card"},L={key:0,class:"loading-spinner"},m={key:1,class:"post-table"},b=["onClick"],h={key:2,class:"no-data"};var v={__name:"NoticesCommunityManagement",setup(t){const e=(0,r.KR)([]),l=(0,r.KR)(!0),v=(0,r.Kh)({title:"",content:""}),y=t=>t?t.toDate().toLocaleDateString("ko-KR"):"",f=async()=>{l.value=!0;try{const t=(0,s.rJ)(c.db,"posts"),l=(0,s.P)(t,(0,s.My)("createdAt","desc")),a=await(0,s.GG)(l);e.value=a.docs.map(t=>({id:t.id,...t.data()}))}catch(t){console.error("게시글을 불러오는 중 오류 발생:",t),alert("게시글을 불러오는 데 실패했습니다.")}finally{l.value=!1}},C=async()=>{if(v.title.trim()&&v.content.trim())try{await(0,s.gS)((0,s.rJ)(c.db,"posts"),{title:v.title,content:v.content,authorId:c.j2.currentUser.uid,authorName:"관리자",type:"notice",createdAt:(0,s.O5)()}),alert("공지사항이 성공적으로 등록되었습니다."),v.title="",v.content="",await f()}catch(t){console.error("공지사항 등록 중 오류 발생:",t),alert("공지사항 등록에 실패했습니다.")}else alert("제목과 내용을 모두 입력해주세요.")},g=async t=>{const e=confirm("정말로 이 게시글을 삭제하시겠습니까?");if(e)try{await(0,s.kd)((0,s.H9)(c.db,"posts",t)),alert("게시글이 성공적으로 삭제되었습니다."),await f()}catch(l){console.error("게시글 삭제 중 오류 발생:",l),alert("게시글 삭제에 실패했습니다.")}};return(0,a.sV)(f),(t,r)=>((0,a.uX)(),(0,a.CE)("div",u,[r[8]||(r[8]=(0,a.Lk)("h3",null,[(0,a.Lk)("i",{class:"fas fa-bullhorn"}),(0,a.eW)(" 공지사항 및 커뮤니티 관리")],-1)),r[9]||(r[9]=(0,a.Lk)("p",null,"새로운 공지사항을 작성하거나 게시글을 관리합니다.",-1)),(0,a.Lk)("div",i,[r[5]||(r[5]=(0,a.Lk)("h4",null,"새 공지사항 작성",-1)),(0,a.Lk)("form",{onSubmit:(0,n.D$)(C,["prevent"])},[(0,a.Lk)("div",d,[r[2]||(r[2]=(0,a.Lk)("label",{for:"title"},"제목",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",id:"title","onUpdate:modelValue":r[0]||(r[0]=t=>v.title=t),placeholder:"공지사항 제목을 입력하세요",required:""},null,512),[[n.Jo,v.title]])]),(0,a.Lk)("div",k,[r[3]||(r[3]=(0,a.Lk)("label",{for:"content"},"내용",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"content","onUpdate:modelValue":r[1]||(r[1]=t=>v.content=t),rows:"5",placeholder:"공지사항 내용을 입력하세요",required:""},null,512),[[n.Jo,v.content]])]),r[4]||(r[4]=(0,a.Lk)("button",{type:"submit",class:"btn btn-primary"},"공지사항 등록",-1))],32)]),(0,a.Lk)("div",p,[r[7]||(r[7]=(0,a.Lk)("h4",null,"게시글 목록",-1)),l.value?((0,a.uX)(),(0,a.CE)("div",L)):e.value.length>0?((0,a.uX)(),(0,a.CE)("table",m,[r[6]||(r[6]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"유형"),(0,a.Lk)("th",null,"제목"),(0,a.Lk)("th",null,"작성자"),(0,a.Lk)("th",null,"작성일"),(0,a.Lk)("th",null,"관리")])],-1)),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.value,t=>((0,a.uX)(),(0,a.CE)("tr",{key:t.id},[(0,a.Lk)("td",null,[(0,a.Lk)("span",{class:(0,o.C4)(`type-badge type-${t.type||"default"}`)},(0,o.v_)("notice"===t.type?"공지":"커뮤니티"),3)]),(0,a.Lk)("td",null,(0,o.v_)(t.title),1),(0,a.Lk)("td",null,(0,o.v_)(t.authorName||"시스템"),1),(0,a.Lk)("td",null,(0,o.v_)(y(t.createdAt)),1),(0,a.Lk)("td",null,[(0,a.Lk)("button",{onClick:e=>g(t.id),class:"btn btn-sm btn-danger"}," 삭제 ",8,b)])]))),128))])])):((0,a.uX)(),(0,a.CE)("div",h,"작성된 게시글이 없습니다."))])]))}},y=l(1241);const f=(0,y.A)(v,[["__scopeId","data-v-6d5acdcc"]]);var C=f}}]);
//# sourceMappingURL=913.b146aa37.js.map