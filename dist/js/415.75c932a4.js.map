{"version":3,"file":"js/415.75c932a4.js","mappings":"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","sources":["webpack://saltmate-app/./src/components/admin/EquityManagement.vue","webpack://saltmate-app/./src/components/admin/EquityManagement.vue?64d7"],"sourcesContent":["<template>\n  <div class=\"management-container\">\n    <h3><i class=\"fas fa-chart-pie\"></i> 지분 관리</h3>\n    <p>NFT 보유자들의 공장 지분율을 관리합니다.</p>\n\n    <div class=\"equity-list card\">\n      <h4>전체 지분 현황 (총 {{ totalEquity }}%)</h4>\n      <div v-if=\"loading\" class=\"loading-spinner\"></div>\n      <table v-else-if=\"equityHolders.length > 0\" class=\"equity-table\">\n        <thead>\n          <tr>\n            <th>보유자 이름</th>\n            <th>이메일</th>\n            <th>현재 지분율 (%)</th>\n            <th>새 지분율 입력</th>\n            <th>관리</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"holder in equityHolders\" :key=\"holder.userId\">\n            <td>{{ holder.userName }}</td>\n            <td>{{ holder.userEmail }}</td>\n            <td>{{ holder.equityPercentage }} %</td>\n            <td>\n              <input\n                type=\"number\"\n                v-model.number=\"holder.newEquity\"\n                min=\"0\"\n                max=\"100\"\n                step=\"0.01\"\n                placeholder=\"새 지분율\"\n                class=\"equity-input\"\n              />\n            </td>\n            <td>\n              <button\n                @click=\"updateEquity(holder)\"\n                class=\"btn btn-sm btn-primary\"\n              >\n                지분율 저장\n              </button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n      <div v-else class=\"no-data\">지분 정보를 가진 사용자가 없습니다.</div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted, computed } from \"vue\";\nimport { db } from \"@/firebaseConfig\";\nimport { collection, getDocs, doc, updateDoc } from \"firebase/firestore\";\n\nconst equityHolders = ref([]);\nconst loading = ref(true);\n\nconst totalEquity = computed(() => {\n  return equityHolders.value\n    .reduce((sum, holder) => sum + (holder.equityPercentage || 0), 0)\n    .toFixed(2);\n});\n\nconst fetchEquityData = async () => {\n  loading.value = true;\n  try {\n    const querySnapshot = await getDocs(collection(db, \"equity\"));\n    equityHolders.value = querySnapshot.docs.map((doc) => ({\n      ...doc.data(),\n      newEquity: null, // 수정을 위한 입력 필드 초기화\n    }));\n  } catch (error) {\n    console.error(\"지분 정보를 불러오는 중 오류 발생:\", error);\n  } finally {\n    loading.value = false;\n  }\n};\n\nconst updateEquity = async (holder) => {\n  if (holder.newEquity === null || holder.newEquity < 0) {\n    alert(\"유효한 지분율을 입력해주세요.\");\n    return;\n  }\n  if (\n    !confirm(\n      `'${holder.userName}'님의 지분율을 ${holder.newEquity}%로 변경하시겠습니까?`\n    )\n  )\n    return;\n\n  const equityRef = doc(db, \"equity\", holder.userId);\n  try {\n    await updateDoc(equityRef, {\n      equityPercentage: holder.newEquity,\n    });\n    alert(\"지분율이 성공적으로 업데이트되었습니다.\");\n    await fetchEquityData(); // 목록 새로고침\n  } catch (error) {\n    console.error(\"지분율 업데이트 중 오류 발생:\", error);\n  }\n};\n\nonMounted(fetchEquityData);\n</script>\n\n<style scoped>\n/* 이전 컴포넌트들과 유사한 스타일 */\n.management-container {\n  display: flex;\n  flex-direction: column;\n  gap: 30px;\n}\n.card {\n  background-color: #fff;\n  padding: 30px;\n  border-radius: 12px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);\n}\nh3,\nh4 {\n  margin-top: 0;\n}\n\n.equity-table {\n  width: 100%;\n  border-collapse: collapse;\n  margin-top: 20px;\n}\n.equity-table th,\n.equity-table td {\n  border-bottom: 1px solid #eee;\n  padding: 12px 15px;\n  text-align: left;\n  vertical-align: middle;\n}\n.equity-input {\n  width: 100px;\n  padding: 8px;\n  border: 1px solid #ccc;\n  border-radius: 5px;\n}\n/* ... (버튼, 로딩 스피너 등 공용 스타일) ... */\n</style>\n","import script from \"./EquityManagement.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./EquityManagement.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./EquityManagement.vue?vue&type=style&index=0&id=764661f3&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-764661f3\"]])\n\nexport default __exports__"],"names":["equityHolders","ref","loading","totalEquity","computed","value","reduce","sum","holder","equityPercentage","toFixed","fetchEquityData","async","querySnapshot","getDocs","collection","db","docs","map","doc","data","newEquity","error","console","updateEquity","alert","confirm","userName","equityRef","userId","updateDoc","onMounted","_createElementBlock","_hoisted_1","_createElementVNode","class","_hoisted_2","_toDisplayString","_hoisted_3","length","_hoisted_4","_Fragment","_renderList","key","userEmail","type","$event","min","max","step","placeholder","number","onClick","_hoisted_6","_hoisted_7","__exports__"],"sourceRoot":""}