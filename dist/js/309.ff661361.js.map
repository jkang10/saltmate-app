{"version":3,"file":"js/309.ff661361.js","mappings":"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","sources":["webpack://saltmate-app/./src/components/admin/InvestmentManagement.vue","webpack://saltmate-app/./src/components/admin/InvestmentManagement.vue?92b2"],"sourcesContent":["<template>\n  <div class=\"investment-management\">\n    <h3><i class=\"fas fa-hand-holding-usd\"></i> 투자금 관리</h3>\n    <p>전체 투자 현황을 요약하고, 입/출금 및 정산 처리를 관리합니다.</p>\n\n    <div class=\"summary-cards\">\n      <div class=\"card\">\n        <h4>총 투자금액</h4>\n        <p>{{ formatCurrency(summary.totalAmount) }}</p>\n      </div>\n      <div class=\"card\">\n        <h4>총 투자 건수</h4>\n        <p>{{ summary.totalCount }} 건</p>\n      </div>\n      <div class=\"card\">\n        <h4>처리 완료 건수</h4>\n        <p>{{ summary.completedCount }} 건</p>\n      </div>\n      <div class=\"card\">\n        <h4>입금 확인중 건수</h4>\n        <p>{{ summary.pendingCount }} 건</p>\n      </div>\n    </div>\n\n    <div v-if=\"loading\" class=\"loading-spinner\"></div>\n    <table v-else-if=\"investments.length > 0\" class=\"investment-table\">\n      <thead>\n        <tr>\n          <th>투자자 이름</th>\n          <th>이메일</th>\n          <th>투자 금액</th>\n          <th>투자일</th>\n          <th>상태</th>\n          <th>관리</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"investment in investments\" :key=\"investment.id\">\n          <td>{{ investment.userName }}</td>\n          <td>{{ investment.userEmail }}</td>\n          <td class=\"amount\">{{ formatCurrency(investment.amount) }}</td>\n          <td>{{ formatDate(investment.createdAt) }}</td>\n          <td>\n            <span :class=\"`status-badge status-${investment.status}`\">\n              {{ getStatusText(investment.status) }}\n            </span>\n          </td>\n          <td>\n            <button\n              v-if=\"investment.status === 'pending'\"\n              @click=\"updateStatus(investment.id, 'completed')\"\n              class=\"btn btn-sm btn-success\"\n            >\n              입금 확인\n            </button>\n            <button\n              v-if=\"investment.status === 'completed'\"\n              @click=\"updateStatus(investment.id, 'pending')\"\n              class=\"btn btn-sm btn-warning\"\n            >\n              확인 취소\n            </button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n    <div v-else class=\"no-data\">투자 내역이 없습니다.</div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted, reactive } from \"vue\";\nimport { db } from \"@/firebaseConfig\";\nimport {\n  collection,\n  getDocs,\n  doc,\n  updateDoc,\n  orderBy,\n  query,\n} from \"firebase/firestore\";\n\nconst investments = ref([]);\nconst loading = ref(true);\nconst summary = reactive({\n  totalAmount: 0,\n  totalCount: 0,\n  completedCount: 0,\n  pendingCount: 0,\n});\n\n// --- Helper Functions ---\nconst formatCurrency = (value) =>\n  new Intl.NumberFormat(\"ko-KR\", { style: \"currency\", currency: \"KRW\" }).format(\n    value\n  );\nconst formatDate = (timestamp) => {\n  if (!timestamp) return \"\";\n  return timestamp.toDate().toLocaleDateString(\"ko-KR\");\n};\nconst getStatusText = (status) => {\n  const statusMap = {\n    pending: \"입금 확인중\",\n    completed: \"처리 완료\",\n    cancelled: \"취소\",\n  };\n  return statusMap[status] || status;\n};\n\n// --- Firestore Functions ---\nconst fetchInvestments = async () => {\n  loading.value = true;\n  try {\n    const investmentsRef = collection(db, \"investments\");\n    const q = query(investmentsRef, orderBy(\"createdAt\", \"desc\"));\n    const querySnapshot = await getDocs(q);\n    investments.value = querySnapshot.docs.map((doc) => ({\n      id: doc.id,\n      ...doc.data(),\n    }));\n    calculateSummary();\n  } catch (error) {\n    console.error(\"투자 내역을 불러오는 중 오류 발생:\", error);\n    alert(\"투자 내역을 불러오는 데 실패했습니다.\");\n  } finally {\n    loading.value = false;\n  }\n};\n\nconst calculateSummary = () => {\n  summary.totalAmount = investments.value.reduce(\n    (sum, item) => sum + item.amount,\n    0\n  );\n  summary.totalCount = investments.value.length;\n  summary.completedCount = investments.value.filter(\n    (item) => item.status === \"completed\"\n  ).length;\n  summary.pendingCount = investments.value.filter(\n    (item) => item.status === \"pending\"\n  ).length;\n};\n\nconst updateStatus = async (id, newStatus) => {\n  const statusText = getStatusText(newStatus);\n  const confirmation = confirm(\n    `이 투자 건의 상태를 '${statusText}' (으)로 변경하시겠습니까?`\n  );\n  if (!confirmation) return;\n\n  try {\n    const investmentRef = doc(db, \"investments\", id);\n    await updateDoc(investmentRef, { status: newStatus });\n\n    const index = investments.value.findIndex((item) => item.id === id);\n    if (index !== -1) {\n      investments.value[index].status = newStatus;\n    }\n    calculateSummary();\n    alert(\"상태가 성공적으로 변경되었습니다.\");\n  } catch (error) {\n    console.error(\"상태 변경 중 오류 발생: \", error);\n    alert(\"상태 변경에 실패했습니다.\");\n  }\n};\n\nonMounted(fetchInvestments);\n</script>\n\n<style scoped>\n/* 이전 UserManagement 스타일과 유사하게 구성 */\n.investment-management {\n  background-color: #fff;\n  padding: 30px;\n  border-radius: 12px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);\n}\n.investment-management h3 {\n  margin-bottom: 20px;\n}\n\n/* 요약 카드 */\n.summary-cards {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n  gap: 20px;\n  margin-bottom: 30px;\n}\n.summary-cards .card {\n  background-color: #f8f9fa;\n  padding: 20px;\n  border-radius: 8px;\n  text-align: center;\n}\n.summary-cards .card h4 {\n  margin-bottom: 10px;\n  color: #555;\n}\n.summary-cards .card p {\n  font-size: 1.5em;\n  font-weight: bold;\n  color: #333;\n}\n\n/* 투자 내역 테이블 */\n.investment-table {\n  width: 100%;\n  border-collapse: collapse;\n  margin-top: 20px;\n}\n.investment-table th,\n.investment-table td {\n  border-bottom: 1px solid #eee;\n  padding: 12px 15px;\n  text-align: left;\n  vertical-align: middle;\n}\n.investment-table th {\n  background-color: #f8f9fa;\n}\n.investment-table .amount {\n  font-weight: 600;\n}\n\n/* 상태 배지 */\n.status-badge {\n  padding: 5px 10px;\n  border-radius: 15px;\n  font-size: 0.8em;\n  font-weight: bold;\n  color: #fff;\n}\n.status-pending {\n  background-color: #ffc107; /* 주황색 */\n}\n.status-completed {\n  background-color: #28a745; /* 초록색 */\n}\n.status-cancelled {\n  background-color: #6c757d; /* 회색 */\n}\n\n/* 버튼 */\n.btn {\n  border: none;\n  border-radius: 5px;\n  padding: 6px 12px;\n  cursor: pointer;\n  transition: opacity 0.2s;\n}\n.btn:hover {\n  opacity: 0.8;\n}\n.btn-success {\n  background-color: #28a745;\n  color: white;\n}\n.btn-warning {\n  background-color: #ffc107;\n  color: #212529;\n}\n\n/* 로딩 및 데이터 없음 */\n.loading-spinner,\n.no-data {\n  text-align: center;\n  padding: 50px;\n  color: #777;\n}\n.loading-spinner {\n  border: 4px solid rgba(0, 0, 0, 0.1);\n  width: 36px;\n  height: 36px;\n  border-radius: 50%;\n  border-left-color: #007bff;\n  animation: spin 1s ease infinite;\n  margin: 50px auto;\n}\n@keyframes spin {\n  to {\n    transform: rotate(360deg);\n  }\n}\n</style>\n","import script from \"./InvestmentManagement.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./InvestmentManagement.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./InvestmentManagement.vue?vue&type=style&index=0&id=fb3c8410&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-fb3c8410\"]])\n\nexport default __exports__"],"names":["investments","ref","loading","summary","reactive","totalAmount","totalCount","completedCount","pendingCount","formatCurrency","value","Intl","NumberFormat","style","currency","format","formatDate","timestamp","toDate","toLocaleDateString","getStatusText","status","statusMap","pending","completed","cancelled","fetchInvestments","async","investmentsRef","collection","db","q","query","orderBy","querySnapshot","getDocs","docs","map","doc","id","data","calculateSummary","error","console","alert","reduce","sum","item","amount","length","filter","updateStatus","newStatus","statusText","confirmation","confirm","investmentRef","updateDoc","index","findIndex","onMounted","_createElementBlock","_hoisted_1","_createElementVNode","class","_hoisted_2","_hoisted_3","_toDisplayString","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_Fragment","_renderList","investment","key","userName","userEmail","_hoisted_9","createdAt","_normalizeClass","onClick","$event","_hoisted_10","_hoisted_11","_hoisted_12","__exports__"],"sourceRoot":""}