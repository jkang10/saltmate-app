"use strict";(self["webpackChunksaltmate_app"]=self["webpackChunksaltmate_app"]||[]).push([[521],{9521:function(a,n,l){l.r(n),l.d(n,{default:function(){return h}});l(8111),l(2489),l(1701);var t=l(6768),e=l(4232),s=l(144),u=l(5328),i=l(2832);const r={class:"user-management"},c={key:0,class:"loading-spinner"},d={key:1,class:"user-table"},o=["onClick"],k=["onClick"],m={key:2,class:"no-data"};var v={__name:"UserManagement",setup(a){const n=(0,s.KR)([]),l=(0,s.KR)(!0),v=a=>a&&a.toDate?a.toDate().toLocaleDateString("ko-KR"):"날짜 정보 없음",L=async()=>{try{const a=await(0,i.GG)((0,i.rJ)(u.db,"users"));n.value=a.docs.map(a=>({id:a.id,...a.data()}))}catch(a){console.error("사용자 정보를 불러오는 중 오류 발생:",a),alert("사용자 정보를 불러오는 데 실패했습니다.")}finally{l.value=!1}},b=async a=>{const n=confirm(`'${a.name}' 사용자의 권한을 '${a.isAdmin?"일반 사용자":"관리자"}' (으)로 변경하시겠습니까?`);if(n)try{const n=(0,i.H9)(u.db,"users",a.id);await(0,i.mZ)(n,{isAdmin:!a.isAdmin}),a.isAdmin=!a.isAdmin,alert("사용자 권한이 성공적으로 변경되었습니다.")}catch(l){console.error("권한 변경 중 오류 발생:",l),alert("권한 변경에 실패했습니다.")}},h=async a=>{const l=confirm("정말로 이 사용자를 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다.");if(l)try{await(0,i.kd)((0,i.H9)(u.db,"users",a)),n.value=n.value.filter(n=>n.id!==a),alert("사용자가 성공적으로 삭제되었습니다.")}catch(t){console.error("사용자 삭제 중 오류 발생:",t),alert("사용자 삭제에 실패했습니다.")}};return(0,t.sV)(()=>{L()}),(a,s)=>((0,t.uX)(),(0,t.CE)("div",r,[s[1]||(s[1]=(0,t.Lk)("h3",null,[(0,t.Lk)("i",{class:"fas fa-users-cog"}),(0,t.eW)(" 회원 관리")],-1)),s[2]||(s[2]=(0,t.Lk)("p",null,"회원 목록을 조회하고 사용자 권한을 관리합니다.",-1)),l.value?((0,t.uX)(),(0,t.CE)("div",c)):(0,t.Q3)("",!0),!l.value&&n.value.length>0?((0,t.uX)(),(0,t.CE)("table",d,[s[0]||(s[0]=(0,t.Lk)("thead",null,[(0,t.Lk)("tr",null,[(0,t.Lk)("th",null,"이름"),(0,t.Lk)("th",null,"이메일"),(0,t.Lk)("th",null,"가입일"),(0,t.Lk)("th",null,"관리자 여부"),(0,t.Lk)("th",null,"관리")])],-1)),(0,t.Lk)("tbody",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(n.value,a=>((0,t.uX)(),(0,t.CE)("tr",{key:a.id},[(0,t.Lk)("td",null,(0,e.v_)(a.name),1),(0,t.Lk)("td",null,(0,e.v_)(a.email),1),(0,t.Lk)("td",null,(0,e.v_)(v(a.createdAt)),1),(0,t.Lk)("td",null,[(0,t.Lk)("span",{class:(0,e.C4)(a.isAdmin?"admin-badge":"user-badge")},(0,e.v_)(a.isAdmin?"Admin":"User"),3)]),(0,t.Lk)("td",null,[(0,t.Lk)("button",{onClick:n=>b(a),class:"btn btn-sm btn-secondary"}," 권한 변경 ",8,o),(0,t.Lk)("button",{onClick:n=>h(a.id),class:"btn btn-sm btn-danger"}," 삭제 ",8,k)])]))),128))])])):(0,t.Q3)("",!0),l.value||0!==n.value.length?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("div",m," 표시할 사용자가 없습니다. "))]))}},L=l(1241);const b=(0,L.A)(v,[["__scopeId","data-v-45c9f8b6"]]);var h=b}}]);
//# sourceMappingURL=521.0c17ac3f.js.map